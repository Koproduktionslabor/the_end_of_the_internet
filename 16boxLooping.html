<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/osc/dist/osc-browser.min.js"></script>
    <link href='style.css' rel='stylesheet'>
    <title>End of Internet</title>
</head>
<body>
    <div class="container">
       
    <h3><!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href='style.css' rel='stylesheet'>
            <title>End of Internet</title>
        </head>
        <body>
            <div class="container">
                <div class="arrows">   
                    <a href="4boxAre.html">↩️back</a>    
                    <!--<a>↪️redo</a>-->
                </div> 
                <br>    
            <h3>Sometimes the mind can loop through the same scene<br><br>
                Maybe there is a situation that triggered you to experience:<br><br>
    
                Immobilisation? 
                <br>
                <a href="17nameFreeze.html" id="loop1">- Learn Freeze Mode</a>
                <br>
                Defensiveness? <br>
                <a href="18nameFight.html" id="loop2">- Learn Fight Mode</a>
                <br>
                Fear or Danger? 
                <br>
                <a href="19nameFlight.html" id="loop3">- Learn Flight Mode</a>
                <br>
                Oversharing? 
                <br>
                <a href="20nameFawn.html" id="loop4">- Learn Fawn Mode</a>
            </h3>
        
            </div>
        
    

</body>

<script>

        //codigo para enviar osc
let oscPort;
   
oscPort = new osc.WebSocketPort({
  url: "ws://localhost:9000", // same as your Node.js server
  metadata: true
});
oscPort.open();

oscPort.on("ready", () => {
  console.log("Connected to OSC WebSocket!");
});

oscPort.on("open", () => {
  console.log("✅ WebSocket connected to Node.js server");
});

if (oscPort && oscPort.readyState === WebSocket.OPEN) {
  oscPort.send({
    address: "/address",
    args: [
      {
        type: "f", // float
        value: 123.4
      },
      {
        type: "s", // string
        value: "hello"
      }
    ]
  });
}


function sendOSC(address, values) {

const args = values.map((v) => {
if (typeof v === "number") {
  return { type: "f", value: v }; // float
} else if (typeof v === "string") {
  return { type: "s", value: v }; // string
} else {
  return { type: "s", value: String(v) };
}
});

oscPort.send({ address, args });
console.log("✅ Sent OSC:", address, args);
console.log("Sent OSC:", address, values);
}

//asignar un nombre con una variable para cada id
const myButton1 = document.getElementById("loop1")

myButton1.addEventListener("click", function (e) {
  console.log("Button clicked:", e.currentTarget.className);
sendOSC("/levelLoop", [1]);
});

const myButton2 = document.getElementById("loop2")

myButton2.addEventListener("click", function (e) {
  console.log("Button clicked:", e.currentTarget.className);
sendOSC("/levelLoop", [2]);
});

const myButton3 = document.getElementById("loop3")

myButton3.addEventListener("click", function (e) {
  console.log("Button clicked:", e.currentTarget.className);
sendOSC("/levelLoop", [3]);
});

const myButton4 = document.getElementById("loop4")

myButton4.addEventListener("click", function (e) {
  console.log("Button clicked:", e.currentTarget.className);
sendOSC("/levelLoop", [4]);
});

</script>
</html>